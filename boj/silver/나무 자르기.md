[link](https://www.acmicpc.net/problem/2805)
### 문제 이해
나무 M미터 필요. 나무가 N개 주어질때, 높이 H 이상으로는 다 잘림. 적어도 M미터 가져가기 위하여 설정할 높이 H의 최대값 구하기
H로 자른 뒤 남긴 나무를 가져감
M <= 2 * 10 ^ 9 , N <= 10 ^ 6

### 추상화
파라메트릭 서치로 H의 최대값을 구하기. 
	O(NlogN) 복잡도로 구할 수 있음

### 계획
나무 길이 정렬
길이 최대값 = right
left right mid 설정하여 실제로 H를 기준으로 계산
값이 M 초과하면 loop 종료 후 right = mid - 1
반대면 left = mid + 1
### 코드
```python
import sys
input = sys.stdin.readline


def solve(N, M, array):
    array.sort()
    left = 0
    right = array[-1]
    max_mid = 0
    while left <= right:
        mid = (left + right) // 2
        sum = 0
        for i, num in enumerate(array):
            if num > mid:
                sum += num - mid
        if sum < M:
            right = mid - 1
        else:
            max_mid = mid
            left = mid + 1
    return max_mid
        

if __name__ == "__main__":
    [N, M] = map(int, input().split())
    array = list(map(int, input().split()))
    result = solve(N, M, array)
    print(result)

```
개선 - 정렬 제거, condition으로 조건 분리
```python
import sys
input = sys.stdin.readline

def solve(N, M, arr):
    def condition(h: int) -> bool:
        wood = 0
        for x in arr:
            if x > h:
                wood += x - h
        return wood >= M

    left, right = 0, max(arr)
    ans = 0

    while left <= right:
        mid = (left + right) // 2
        if condition(mid):        # f(mid) == True
            ans = mid             # 가능한 높이 저장
            left = mid + 1        # 더 큰 높이도 가능한지 탐색
        else:                     # f(mid) == False
            right = mid - 1       # 높이를 낮춰야 함
    return ans

if __name__ == "__main__":
    N, M = map(int, input().split())
    arr = list(map(int, input().split()))
    print(solve(N, M, arr))
```
### 회고
똑같은 파라메트릭 서치인데, 조건 분기를 잘못해서 해멨다.
	조건을 만족하는 최대값을 저장했다가 이를 반환해야함
	정확한 값을 이분 탐색으로 찾는것이 아니라, 값을 만족하는 최대값을 갱신하는 방식
최대값을 이용하기 위해 정렬하고 마지막값을 이용했는데, 불필요했음
	최대값을 전체 순회해서 한번 찾으면 그만이었음
추상화할때 정답을 정확하게 정의하고 가는게 필요함
	불변식 관점에서 원하는 답이 무엇인지 정의
	f(h) = 높이 h로 잘랐을때 얻는 나무길이가 M보다 크거나 같은지 반환
	원하는 답은 f(h)가 true인 h중에서 최대값
condition을 정의하여 명확하게 분리하자.